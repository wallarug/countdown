<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title> Countdown Clock </title>
	<link rel="shortcut icon" href="../favicon.ico">
	<link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
	<link rel="stylesheet" href="css/listview-grid.css">
	<script src="js/jquery-1.12.4.js"></script>
	<script src="js/jquery.mobile-1.4.5.js"></script>
    
	<!-- Global site tag (gtag.js) - Google Analytics -->    
    <script>
      $( function() {
        $( "#tabs" ).tabs();
      } );
    </script>
	
	<!-- <style> -->
	<!-- /* Style the form - display items horizontally */ -->
	<!-- .form-inline { -->
	  <!-- display: flex; -->
	  <!-- flex-flow: row wrap; -->
	  <!-- align-items: center; -->
	<!-- } -->

	<!-- /* Add some margins for each label */ -->
	<!-- .form-inline label { -->
	  <!-- margin: 5px 10px 5px 0; -->
	<!-- } -->

	<!-- /* Style the input fields */ -->
	<!-- .form-inline input { -->
	  <!-- vertical-align: middle; -->
	  <!-- margin: 5px 10px 5px 0; -->
	  <!-- padding: 10px; -->
	  <!-- background-color: #fff; -->
	  <!-- border: 1px solid #ddd; -->
	<!-- } -->
	<!-- </style> -->
</head>
<body>

<div data-role="page" data-theme="b" id="demo-page" class="my-page">

	<div data-role="header">
		<h1>The Clock</h1>
		<!-- <a href="./" data-shadow="false" data-iconshadow="false" data-icon="carat-l" data-iconpos="notext" data-rel="back" data-ajax="false">Back</a> -->
	</div><!-- /header -->
    
    <!-- Please update the image file in img/logo.png for your school.  Also change the background from #000000 (white) to your logo's background. -->
    <!-- <div style="background-color: #FFFFFF;"> -->
        <!-- <img src="img/logo.png" style="margin:auto; text-align: center; display: block" /> -->
    <!-- </div> -->

    <!-- begin body -->
    <div role="main" class="ui-content">

        <div data-role="tabs" id="tabs">
            <div data-role="navbar">
              <ul>
                <li><a href="#clock" data-ajax="false" onclick="startTimeClock()">Clock</a></li>
                <li><a href="#timer" data-ajax="false" onclick="startTimer()">Timer</a></li>
                <li><a href="#settings" data-ajax="false">Settings</a></li>
              </ul>
            </div>

            <!-- Clock Tab (default) -->
            <div id="clock">
				<br />
				<p style="text-align:center; ">
					<span style="font-size:36px" id="clock-date"></span> </br />
					<span style="font-size:72px;" id="clock-time"></span>
				</p>
                
            </div>

            <!-- Timer Tab -->
            <div id="timer">
                <br />
				<p style="text-align:center; ">
                    <span style="font-size:42px;" id="timer-time"></span> </br />
					<span style="font-size:36px" id="timer-date"></span>
					
				</p>
                
                <p style="text-align:center; font-size:72px;">
                    <span style="font-size:72px" id="timer-countdown">Not configured.</span> </br />
                </p>
                <div style="text-align:center">
                    <a class="ui-shadow ui-btn ui-corner-all ui-btn-inline" type="button" onclick="pauseTimer()" id="pauseButton"> Start </a>
                    <a class="ui-shadow ui-btn ui-corner-all ui-btn-inline" type="button" onclick="setTimer()"> Reset </a>
                </div>
				
				<div id="information" style="text-align:center">
                    
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings">
                <form class="form-inline" id="countform1">
                <h3> Timer Settings </h3>
                <div class="ui-field-contain">
					<label for="hours"> Hours: </label>
					<input type="text" name="hours" id="hours" value="1"/>
                    <label for="minutes"> Minutes: </label>
					<input type="text" name="minutes" id="minutes" value="0"/>
                    <label for="seconds"> Seconds: </label>
					<input type="text" name="seconds" id="seconds" value="0"/>
                </div>
				<div class="ui-field-contain">	
					<label for="details"> Details: </label>
					<textarea  type="text" name="details" id="details" rows="8"/>
Reading: h m
Writing: h m
 </textarea>
				</div>
					
					<button type="button" onclick="setTimer()"> Go </button>
				</form>
				
                
                <span id="demo"> </span>
				
				
            </div>

        </div> <!-- End Tabs -->
    </div><!-- /content -->
    
<!-- ~*~  PLEASE INSERT ALL YOUR POPUP CODE BELOW THIS LINE  ~*~ -->

</div><!-- /page -->

	<script>
        // Set the date we're counting down to
        var timeRemaining;
        var pause = false;
        
        function setTimer(){
            var today = new Date().getTime();
            var hh = document.getElementById("hours").value;
            var mm = document.getElementById("minutes").value;
            var ss = document.getElementById("seconds").value;
            timeRemaining = (hh*3600000) + (mm*60000) + (ss*1000);
            displayInterval();
        }

        // Update the count down every 1 second
        var x = setInterval(function() {
          if (pause) {
              // Get today's date and time
            var now = new Date().getTime();

            // Find the distance between now and the count down date
            //var distance = countDownDate - now;
            //var distance = ( now + timeRemaining ) - now;
            var distance = timeRemaining;

            // Time calculations for days, hours, minutes and seconds
            var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // Display the result in the element with id="demo"
            document.getElementById("timer-countdown").innerHTML = ('0' + hours).slice(-2) + " h "
            + ('0' + minutes).slice(-2) + " m " + ('0' + seconds).slice(-2) + " s ";


            timeRemaining = timeRemaining - 1000;

            // If the count down is finished, write some text
            if (distance < 0) {
                clearInterval(x);
                document.getElementById("timer-countdown").innerHTML = "TIME EXPIRED";
            }
          }
          
        }, 1000);
        
        function displayInterval(){
            // Get today's date and time
            var now = new Date().getTime();

            // Find the distance between now and the count down date
            //var distance = countDownDate - now;
            //var distance = ( now + timeRemaining ) - now;
            var distance = timeRemaining;

            // Time calculations for days, hours, minutes and seconds
            var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // Display the result in the element with id="demo"
            document.getElementById("timer-countdown").innerHTML = ('0' + hours).slice(-2) + " h "
            + ('0' + minutes).slice(-2) + " m " + ('0' + seconds).slice(-2) + " s ";
            
            pause = false;
            document.getElementById("pauseButton").innerHTML = "Start";
            
            parseDetails();
        }
        
        function pauseTimer(){
            if (pause) {
                pause = false;
                document.getElementById("pauseButton").innerHTML = "Start";
            }
            else {
                document.getElementById("pauseButton").innerHTML = "Pause";
                pause = true;
            }
        }
		
		function startTimeClock() {
		  var element = 'clock-time';
		  var today = new Date();
		  var h = today.getHours();
		  var m = today.getMinutes();
		  var s = today.getSeconds();
		  m = checkTime(m);
		  s = checkTime(s);
		  document.getElementById('clock-time').innerHTML =
		  h + ":" + m + ":" + s;
          document.getElementById('timer-time').innerHTML =
		  h + ":" + m;
		  var t = setTimeout(startTimeClock, 500);
		  
		  startDate();
		}
		
		function startDate() {
			var today = new Date();
			var dd = today.toLocaleDateString();
			document.getElementById('clock-date').innerHTML =
			dd;
            document.getElementById('timer-date').innerHTML =
			dd;
		}
		
		function checkTime(i) {
		  if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
		  return i;
		}
		
		function startTimer() {
		
		
		}
        
        function parseDetails(){
            var text = document.getElementById("details").value;
            console.log(text);
            var arr = text.split(";");
            
            //'<p><span style="frot-size:72px;">' + + '</span> </br><span style="font-size:66px">'
            
            if (arr.length > 1) {
                // more than 1 subject (let's come back to this later)
            
            
            } else {
                // only one subject (easy case)
                var parts = arr[0].split("\n");
                console.log(parts);
                document.getElementById('information').innerHTML =
                '<p><span style="frot-size:72px;">' + parts[0] + '</span> </br> \
                <span style="font-size:66px">' + parts[1] + ' </span></br> \
                <span style="font-size:66px">' + parts[2] + ' </span></br>';
            
            }
        
        
        
        
        }
		
		//document.getElementById("clock-time").innerHTML = (("0"+dt.getDate()).slice(-2)) +"."+ (("0"+(dt.getMonth()+1)).slice(-2)) +"."+ (dt.getFullYear()) +" "+ (("0"+dt.getHours()).slice(-2)) +":"+ (("0"+dt.getMinutes()).slice(-2));
	</script>

</body>
</html>
